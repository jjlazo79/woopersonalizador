!function(t,e){var a={cache:function(){a.els={},a.vars={},a.els.upload=t(".jckpc-attribute-image__upload"),a.els.remove=t(".jckpc-attribute-image__remove")},on_ready:function(){a.cache(),a.setup_image_fields()},setup_image_fields:function(){var e;a.els.upload.on("click",function(a){a.preventDefault();var i=t(this),l=i.closest(".jckpc-attribute-image"),r=l.find(".jckpc-attribute-image__field"),s=l.find(".jckpc-attribute-image__preview"),c=l.find(".jckpc-attribute-image__remove");(e=wp.media.frames.file_frame=wp.media({title:t(this).data("title"),button:{text:t(this).data("button-text")},multiple:!1})).on("select",function(){attachment=e.state().get("selection").first().toJSON(),attachment_url=void 0!==attachment.sizes.thumbnail?attachment.sizes.thumbnail.url:attachment.url,r.val(attachment.id),s.html('<img src="'+attachment_url+'" class="attachment-thumbnail size-thumbnail">'),i.addClass("jckpc-attribute-image__upload--edit"),c.show()}),e.open()}),a.els.remove.on("click",function(e){e.preventDefault();var a=t(this).closest(".jckpc-attribute-image"),i=a.find(".jckpc-attribute-image__field"),l=a.find(".jckpc-attribute-image__preview"),r=a.find(".jckpc-attribute-image__upload");i.val(""),l.html(""),r.removeClass("jckpc-attribute-image__upload--edit"),t(this).hide()})}};t(e).ready(a.on_ready())}(jQuery,document),function(t,e){var a={cache:function(){a.els={},a.vars={},a.tmpl={},a.vars.file_frame=!1,a.vars.upload_class=".jckpc-image-button--upload",a.vars.remove_class=".jckpc-image-button--remove",a.vars.collapse_class=".jckpc-layer-options__title--collapse",a.els.add_static_layer=t("#jckpc-add-static-layer"),a.els.sort_order_input=t("#jckpc_sort_order"),a.els.sortable_items=t("#jckpc_sortable"),a.tmpl.static_layer=wp.template("jckpc-static-layer")},on_ready:function(){a.cache(),a.setup_image_fields(),a.setup_sorting(),a.setup_collapse(),a.setup_static_layers()},setup_image_fields:function(){t(e).on("click",a.vars.upload_class,function(e){e.preventDefault();var i=t(this);a.vars.file_frame=wp.media.frames.file_frame=wp.media({title:i.attr("data-uploader_title"),button:{text:i.attr("data-uploader_button_text")},multiple:!1,library:{type:"image/png"}}),a.vars.file_frame.on("select",function(){var e=a.vars.file_frame.state().get("selection").first().toJSON();if("image/png"===e.mime){var l=t(i.attr("data-uploader_field")),r=t(i.attr("data-uploader_field")+"_thumbwrap"),s=void 0!==e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;l.val(e.id),r.prepend('<img src="'+s+'" width="80" height="80" />')}else alert(jckpc_vars.i18n.png_only)}),a.vars.file_frame.open()}),t(e).on("click",a.vars.remove_class,function(){var e=t(this).attr("data-uploader_field");return t(e).val(""),t(e+"_thumbwrap img").remove(),!1})},setup_sorting:function(){a.els.sortable_items.sortable({revert:!0,handle:".jckpc-layer-options__handle",update:function(t,e){a.update_sort_field()}})},update_sort_field:function(){if(!(a.els.sort_order_input.length<=0)){var e=[];a.els.sortable_items.find(".jckpc-layer-options").each(function(){var a=t(this).attr("data-layer-id");e.push(a)}),a.els.sort_order_input.val(e.join(","))}},setup_collapse:function(){t(e).on("click",a.vars.collapse_class,function(){var e=t(this),a=e.find(".jckpc-layer-options__toggle");e.closest(".jckpc-layer-options").find(".jckpc-layer-options__content-wrapper").toggle(),a.toggleClass("jckpc-layer-options__toggle--collapsed")})},setup_static_layers:function(){a.els.add_static_layer.on("click",function(){t("#jckpc_sortable").prepend(a.tmpl.static_layer({index:a.get_highest_static_layer_index()+1})),a.update_sort_field()}),t(e).on("click",".jckpc-layer-options__remove",function(){t(this).closest(".jckpc-layer-options").remove(),a.update_sort_field()})},get_highest_static_layer_index:function(){var e=t("[data-static-layer-index]").map(function(){return t(this).data("static-layer-index")}).get(),a=Math.max.apply(Math,e);return a=isFinite(a)?a:-1}};t(e).ready(a.on_ready())}(jQuery,document);